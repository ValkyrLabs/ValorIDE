---
id: P2P-p2p
title: P2P (P2P Instance Communication)
sidebar_label: P2P / P2P
---

import Admonition from '@theme/Admonition';

# P2P / P2P Communication

ValorIDE supports resilient, real-time communication between multiple running instances using a built-in peer-to-peer (P2P) "P2P" system. This enables seamless collaboration, presence, and data exchange between users, even if the backend server becomes temporarily unavailable.

## Overview

- **Automatic Peer Discovery:** Instances in the same workspace automatically discover each other via the extension hub.
- **WebRTC Data Channels:** After initial signaling, a direct P2P channel is established using WebRTC for low-latency, resilient messaging.
- **Presence & Status:** The system tracks connected peers and open P2P channels, surfacing this in the chat UI.
- **Fallback:** If P2P cannot be established, messages are still routed via the backend for reliability.

## How It Works

1. **Presence Broadcast:** Each instance announces itself via the extension hub.
2. **Signaling:** When a new peer is detected, the system negotiates a WebRTC connection using signaling messages routed through the hub.
3. **Direct Channel:** Once established, messages are mirrored over the P2P channel for speed and resilience.
4. **Status Monitoring:** The UI displays the number of open P2P channels and discovered peers.

## Using P2P in ValorIDE

- **Chat View:** Open the chat view in each instance to see the "P2P" status badge.
- **Status Badge:** The badge shows `P2P X/Y` where X = open P2P channels, Y = discovered peers.
- **Reconnect:** If peers are not connected, click the "Reconnect peers" button to force renegotiation.
- **Configuration:** P2P is enabled by default. You can configure STUN/TURN servers or disable P2P in VSCode settings (`valoride.P2P.p2pEnabled`).

<Admonition type="tip" title="Troubleshooting">
If P2P is not working:
- Ensure both instances are in the same workspace and using the same extension host.
- Check that `valoride.P2P.p2pEnabled` is not set to `false` in your settings.
- Use the "Reconnect peers" button in the chat view.
- Review the developer console for any WebRTC or signaling errors.
</Admonition>

## Security

- **STUN/TURN:** Uses public STUN by default; TURN can be configured for corporate networks.
- **No Sensitive Data:** Only app messages and presence are exchanged; no credentials or secrets are sent over P2P.

## Advanced Configuration

You can customize P2P behavior in your VSCode settings:

```json
{
  "valoride.P2P.p2pEnabled": true,
  "valoride.P2P.turnServers": ["stun:stun.l.google.com:19302"],
  "valoride.P2P.discovery.bonjour": false
}
```

## Best Practices

- Keep both instances updated to the latest ValorIDE version.
- Test in a staging environment before relying on P2P for production workflows.

---

_Last updated: 2025-09-08_
